<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<meta charset="UTF-8">
		<script type="text/javascript" src="../js/zoom/flexible.js" ></script>
		<link href="../css/mui.min.css" rel="stylesheet" />
		<style>
			body,html{
				height: 100%;
				width: 100%;
				overflow: hidden;
			}
			ul {
				padding: 0;
				list-style: none;
				font-size: 20px;
			}
			.content{
				padding-bottom: 1.555555rem;
			}
			#date-box {
				background: #FEFEFE;
				color: #000000;
				font-family: 微软雅黑;
				width: 100%;
				z-index: 999;
				background-color: #FEFEFE;
				border-bottom: 1px solid #f0f0f0;
			}
			
			#now {
				text-align: center;
				position: relative;
				z-index: 999;
				padding: 0.288888rem 0;
				font-size: 0.388888rem;
			}
			#week-list{
				position: relative;				
				z-index: 999;
				display: flex;
				overflow: hidden;
				color: rgb(136,136,136);
				font-size: 0.333333rem;
				padding-bottom: 0.08333rem;
			}
			#week-list li{
				width: calc(100%/7);
				text-align: center;
			}
			
			#date-list{
				position: relative;
				z-index: -1;
				display: flex;
				flex-wrap: wrap;
				padding-top: 0.277777rem;
				background-color: #FEFEFE;
			}
			#date-list li{
				width: calc(100%/7);
				text-align: center;
				padding-bottom: 0.138888rem;
			}
			.circle{
				width: 0.625rem !important;
				height: 0.625rem !important;
				padding: 0 8px;
				border-radius:45px;
				background-color: rgb(190,190,190);
				text-align: center;
				margin: 0 auto;
				display: flex;
				justify-content: center;
				align-items: center;
				color: #fefefe;
			}
			.todayCircle{
				background-color: rgb(27,130,209);
			}
			/*文字*/
			.dayCourse{
				color: rgb(27,130,209);
			}
			.suCourse{
				color: rgb(136,136,136);
			}
			.fuCourse{
				color: rgb(136,136,136);
			}
			.course_text{
				font-size: 0.277777rem;
			}
			.date_day{
				font-size: 0.388888rem;
			}
			/*列表*/
			.list_box{
				position: relative;
				z-index: 999;
				background-color: #FEFEFE;
			}
			.line_box{
				width: 100%;
				height:0.222222rem;
				background-color: #f0f0f0;
			}
			.show_day{	
				padding:0.222222rem 5%;
				background-color: #FFFFFF;
				display: flex;
				align-items: center;
				font-size: 0.388888rem;
				color: rgb(79,150,215);
				border-bottom:2px solid #F0F0F0;
			}
			.blue_cirle{
				width: 0.111111rem;
				height: 0.111111rem;
				border-radius: 45px;
				background-color: rgb(27,130,209);
				margin-right: 0.111111rem;
			}
			.list_ul{
				
			}
			.list_ul li{
				padding: 0.388888rem 5%;
				border-bottom:2px solid #f0f0f0;
				background-color: #FEFEFE;
			}
			.list_title{
				display: flex;
				align-items: center;
				font-size: 0.444444rem;
			}
			.title_time{
				display: block;
				border-radius: 18px;
				border: 2px solid rgb(27,130,209);
				font-size: 0.388888rem;
				padding: 0 0.277777rem;
				color: rgb(27,130,209);
				margin-right: 0.388888rem;
			}
			
			.list_body{
				display: flex;
				justify-content: space-between;
				align-items: center;
				margin-top: 0.208333rem;
				margin-left: 1.938888rem;
			}
			.body_text{
				font-size: 0.388888rem;
			}
			.body_text span{
				margin-left: 0.291666rem;
				color: rgb(27,130,209);
			}
			.body_right{
				font-size: 0.388888rem;
				color: #888888;
			}
			/*当前周几*/
			.today_week{
				color: rgb(27,130,209);
			}
		</style>
	</head>

	<body id="bodyBox">
		<div class="content">
			<div id="date-box">
				<div id="now">
	
				</div>
				<ul id="week-list">
					<li data-week="日">日</li>
					<li data-week="一">一</li>
					<li data-week="二">二</li>
					<li data-week="三">三</li>
					<li data-week="四">四</li>
					<li data-week="五">五</li>
					<li data-week="六">六</li>
				</ul>	
			</div>
			<div>
				<ul  id="date-list">
					
				</ul>
			</div>
		<div id="list_box" class="list_box">
			<div class="line_box"></div>
			<div class="show_day">
				<div class="blue_cirle"></div>今天
			</div>
			<ul class="list_ul">
				<li>
					<div class="list_title"><span class="title_time">15:30</span>语文</div>
					<div class="list_body"><div class="body_text">王老师<span>【班课】</span></div><div class="body_right">待上课</div></div>
				</li>
				<li>
					<div class="list_title"><span class="title_time">15:30</span>语文</div>
					<div class="list_body"><div class="body_text">王老师<span>【一对一】</span></div><div class="body_right">待上课</div></div>
				</li><li>
					<div class="list_title"><span class="title_time">15:30</span>语文</div>
					<div class="list_body"><div class="body_text">王老师<span>【班课】</span></div><div class="body_right">已上课</div></div>
				</li><li>
					<div class="list_title"><span class="title_time">15:30</span>语文</div>
					<div class="list_body"><div class="body_text">王老师<span>【班课】</span></div><div class="body_right">已上课</div></div>
				</li>
			</ul>		
		</div>
	</div>		
		<script src="../js/mui.min.js"></script>
		<script type="text/javascript" src="../js/config.js" ></script>
		<script>
			//将单位数前加0
			function todu(n) {
				if(n < 10) {
					return '0' + n;
				} else {
					return '' + n;
				}
			}
			//显示当前时间
			var date = new Date();
			showdate(date);
			//封装获取日期列表的函数
			function showdate(date) {

				//当前年月
				document.getElementById('now').innerHTML = todu(date.getFullYear()) + '年' + todu(date.getMonth() + 1) + '月';
				//当前日
				var now_day = date.getDate();
				//当前周几
				var week = date.getDay();
				/* 返回当月的天数 */
				var nowDay = getCountDays();
//				返回当月1号周几
				var MonthWeek = getMonthOneWeek();
				//返回月份的某一天
				var maxdate = date.getDate();
				//当前月第一天是周几，并在前面空上相应的li
				var html = '';
				for(var i = 1; i < MonthWeek + 1; i++) {
					html += '<li></li>';
				}

				//输出每天的li
				for(var j = 1; j <= nowDay; j++) {
					if(now_day == j){
						html += '<li class="date_day" id="nowDay'+j+'" date-day="' + j + '"><div class="circle todayCircle">' + j + '</div><div class="course_text dayCourse">有课</div></li>'
					}else if(now_day > j){
						html += '<li class="date_day"  date-day="' + j + '"><div class="circle">' + j + '</div><div class="course_text suCourse">完课</div></li>'
					}else if(now_day < j){
						html += '<li class="date_day"  date-day="' + j + '"><div class="circle">' + j + '</div><div class="course_text fuCourse">待上课</div></li>'
					}
					
				}
				//获取当前周几
				var str = "今天是星期" + "日一二三四五六".charAt(new Date().getDay());

				//将内容写到ul中
				document.getElementById('date-list').innerHTML = html;
			}

			function getCountDays() {
				var curDate = new Date();
				/* 获取当前月份 */
				var curMonth = curDate.getMonth();
				/*  生成实际的月份: 由于curMonth会比实际月份小1, 故需加1 */
				curDate.setMonth(curMonth + 1);
				/* 将日期设置为0, 这里为什么要这样设置, 我不知道原因, 这是从网上学来的 */
				curDate.setDate(0);
				return curDate.getDate();
			}
			function getMonthOneWeek(){
				var curDate = new Date();
				curDate.setDate(1);
				var oneWeek = curDate.getDay();
				return oneWeek;
			}

			mui.init();
			mui.plusReady(function() {
				//监听返回
				listenReturn();
				mui('#date-list').on('tap', '.date_day', function() {
					//			var day = this.getAttribute('date-day');
				})
				//监听滑动
				var bodyBox = document.getElementById("bodyBox");
				var dateList = document.getElementById("date-list");
				var now_day = date.getDate();
				var idFlag = 'nowDay'+now_day;
				var liBox = document.getElementById(idFlag);
				var liBoxToTop = -liBox.offsetTop+10;
				//计算列表高度
				var list_box = document.getElementById("list_box");
				var listBoxToTop = list_box.offsetTop;
				var moveTop = -(listBoxToTop + liBoxToTop) + 70;
				//上滑
				bodyBox.addEventListener('swipeup',function(){	
					dateList.style.transition="-webkit-transform 500ms ease-out";
            		dateList.style.webkitTransform="translateY("+liBoxToTop+"px)";
            		//列表
            		list_box.style.transition="-webkit-transform 500ms ease-out";
            		list_box.style.webkitTransform="translateY("+moveTop+"px)";
				});
				//下滑
				bodyBox.addEventListener('swipedown',function(){
					dateList.style.transition="-webkit-transform 500ms ease-out";
            		dateList.style.webkitTransform="translateY(0)";
            		//列表
            		list_box.style.transition="-webkit-transform 500ms ease-out";
            		list_box.style.webkitTransform="translateY(0)";
				});
				
				//修改当前周几
				var week_list=document.getElementById("week-list");
				var list_item=week_list.getElementsByTagName("li");
				var week = date.getDay();
				for(var i=0;i<7;i++){
					if(i == week){
						list_item[i].innerHTML = '今天';
						list_item[i].setAttribute('class','today_week');
					}
				}
			})
		</script>
	</body>

</html>