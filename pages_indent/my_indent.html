<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<meta name="apple-mobile-web-app-capable" content="yes">
		<title>我的订单</title>
		<script type="text/javascript" src="../js/zoom/flexible.js" ></script>
		<link href="../css/mui.min.css" rel="stylesheet" />
		<style>
			.indent_list li{
				background-color: #FEFEFE;
				padding: 0 5%;
				border-bottom:2px solid rgba(220,220,220,.5);
			}
			.indent_list li:active{
				background-color: rgb(240,240,240);
			}
			.indent_list_title{
				padding-top: 0.222222rem;
				font-size: 0.388888rem;
				color: #555555;
			}
			.indent_list_body{
				margin: 0.305555rem 0;
				font-size: 0.416666rem;
				color: #333333;
				display: flex;
				justify-content: space-between;
			}
			.indent_list_time{
				font-size: 0.333333rem;
				color: #888888;
				font-size: 0.333333rem;
				padding-bottom: 0.277777rem;
			}
			
			.list_right_num{
				font-size: 0.444444rem;
			}
		</style>
	</head>

	<body>
		<div class="content">
			<div id="pullrefresh" class="mui-content mui-scroll-wrapper">
			<div class="mui-scroll">
				<ul class="indent_list">
					<li>
						<div class="indent_list_title">张老师</div>
						<div class="indent_list_body"><span>语文【基础级】班课</span><span>实付：<span class="list_right_num">500.00</span></span></div>
						<div class="indent_list_time">2017-09-10 15:30</div>
					</li>
					<li>
						<div class="indent_list_title">张老师</div>
						<div class="indent_list_body"><span>国学一对一</span><span>实付：<span class="list_right_num">500.00</span></span></div>
						<div class="indent_list_time">2017-09-10 15:30</div>
					</li>
				</ul>
			</div>
		</div>
		</div>
		<!--取出加密值-->
			<input type="text" style="visibility:hidden" id="getPassword" value="" />
		<script src="../js/mui.min.js"></script>
		<script type="text/javascript" src="../js/config.js" ></script>
		<script type="text/javascript" src="../js/hmac-sha1.js" ></script>
		<script type="text/javascript" src="../js/login_config.js" ></script>
		<script type="text/javascript" src="../js/vue.min.js" ></script>
		<script type="text/javascript" src="../js/ajax.js" ></script>
		<script type="text/javascript">
			mui.init({
				swipeBack: false,
				pullRefresh: {
					container: '#pullrefresh',
					down: {
						style: 'circle',
						auto: true,
						callback: pulldownRefresh
					}
				}
			});
			mui.plusReady(function () {
				//监听返回
			    listenReturn();
			    
			    mui('.indent_list').on('tap','li',function(){
					openView.nativeView('indent_detail.html','indent_detail','订单详情');
			    })
			})
						/**
			 * 下拉刷新具体业务实现
			 */
			function pulldownRefresh() {
					//获取数据
			    var ajaxData = {
						url:'restful1/order/ordersByUserId',
						data: {
							pageNum:1,
							pagesize:10
						},
						type:'post'
					}
					ajax(ajaxData, function(data) {
						console.log('请求数据',JSON.stringify(data))
							if(data.code == 401){
								mui('#pullrefresh').pullRefresh().endPulldownToRefresh();
								plus.nativeUI.toast('您还未登录哟！');
							}else if(data.code == 200){
								vm.orderlist = data.data;
								mui('#pullrefresh').pullRefresh().endPulldownToRefresh();
								mui.toast('获取数据成功');
							}else{
								mui('#pullrefresh').pullRefresh().endPulldownToRefresh();
								plus.nativeUI.toast('请求超时！');
							}
					},true); 
			}
			
			var vm = new Vue({
				el: '#msg-content',
				data: {
					orderlist:[]//教师动态数据
				}			
			})
		</script>
	</body>

</html>