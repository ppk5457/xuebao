<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<meta name="apple-mobile-web-app-capable" content="yes">
		<title>一对一教师列表</title>
		<script type="text/javascript" src="../js/zoom/flexible.js" ></script>
		<link href="../css/mui.min.css" rel="stylesheet" />
		<style>
			body,html{
				margin: 0;
				padding: 0;
			}
			ul,li{
				list-style: none;
				margin: 0;
				padding: 0;
			}
			/*顶部选择*/
			.content{
				width: 100%;
			}
			.head_ul{
				display: flex;
				align-items: center;
				width: 100%;
				border-bottom:1px solid rgba(220,220,220,0.5);
				background: rgba(255,255,255,1);
			}
			.head_ul li{
				width: 50%;
				text-align: center;
				font-size: 0.444444rem;
				color: rgb(85,85,85);
				padding: 0.291666rem 0;
				display: flex;
				justify-content: center;
				align-items: center;
			}
			.head_ul img{
				margin-left: 0.111111rem;
				width: 0.25rem;
				height: 0.180555rem;
			}
			/*教师列表*/
			.content_list{
				width: 100%;
			}
			.content_list_li{
				position: relative;
			}
			.recommend{
				position: absolute;
				width: 0.875rem;
				height: 0.875rem;
				top: 0;
				right: 0;
				
			}
			.recommend img{
				width: 100%;
				height: 100%;
			}
			.list_header{
				width: 100%;
				display: flex;
				flex-wrap: wrap;
				background-color: rgb(255,255,255);
			}
			.list_avatar{
				margin: 0.388888rem;
				border-radius: 90px;
				overflow: hidden;
			}
			.list_avatar img{
				width: 1.666666rem;
				height: 1.666666rem;
				border-radius: 90px;
			}
			.list_title{
				position: relative;
				display: flex;
				flex-wrap: wrap;
				padding-top: 0.527777rem;
				position: relative;
				width: 7.5rem;
			}
			.list_title_box{
				display: inline-flex;
				align-items: center;
				width: 100%;
			}
			.list_title_text{
				font-size: 0.444444rem;
			}
			.list_title_img{
				margin-left: 0.111111rem;
				font-size: 0.388888rem;
			}
			.list_title_img img{
				width: 0.388888rem;
				height: 0.388888rem;
			}
			.list_title_ul{
				display: flex;
				margin-left: 0.111111rem;
			}
			.list_title_ul li{
				display: inherit;
			}
			.list_title_li img{
				width: 0.416666rem;
				height: 0.416666rem;
				margin-left: 0.111111rem;
				margin-bottom: 0.027777rem
			}
			.list_title_right{
				position: absolute;
				right: 5%;
				color: #fe7136;
				font-size: 0.444444rem;
			}
			.list_title_right span{
				font-size: 0.472222rem;
			}
			/*个性签名*/
			.signature{
				margin-top: 0;
				margin-bottom: 0.208333rem;
				font-size: 0.388888rem;
				color: rgb(190,190,190);
			}
			/*个人标签*/
			.list_label{
				width: 100%;
			}
			.list_label_ul{
				display: flex;
				flex-wrap: wrap;
			}
			.list_label_li{
				background-color: rgb(166,194,77);
				padding: 0 0.259444rem;
				text-align: center;
				border-radius: 10px;
				color: rgb(255,255,255);
				margin-right:0.222222rem;
				margin-bottom: 0.138888rem;
			}
			.list_label_li:nth-child(1){
				background-color: rgb(166,194,77);
			}
			.list_label_li:nth-child(2){
				background-color: rgb(221,96,91);
			}
			.list_label_li:nth-child(3){
				background-color: rgb(100,195,249);
			}
			.list_label_li:nth-child(4){
				background-color: rgb(166,194,77);
			}
			.list_label_li:nth-child(5){
				background-color: rgb(221,96,91);
			}
			.list_label_li:nth-child(6){
				background-color: rgb(100,195,249);
			}
			
			.list_item{
				width: 100%;
				background-color: rgb(255,255,255);
				padding: 0.377777rem;
				margin-bottom: 0.111111rem;
			}
			.list_item_ul{
				display: flex;
				align-items: center;
			}
			.list_item_ul li{
				width: 33.33%;
				text-align: center;
				border-right: 2px solid rgba(220,220,220,0.8) ;
			}
			.list_item_ul li:last-child{
				border: none;
			}
			.list_item_num{
				font-size: 0.444444rem;
				color:#333333
			}
			.list_item_text{
				color: rgb(136,136,136);
				font-size: 0.388888rem;
			}
			.list_item_btn{
				color: rgba(27,130,209,1);
				font-size: 0.444444rem;
			}
			
			/*遮罩样式修改*/
			.mui-popover .mui-popover-arrow {
				display: none;
			}
			.mui-popover{
				top: 0 !important;
				width: 100% !important;
				left: 0 !important;
				border-radius:0 !important;
			}
			.popover-box {
				text-align: center;
				position: relative;
			}
			.choose_list{
				text-align: left;
			}
			.choose_list li{
				display: flex;
				padding: 0.305555rem 5%;
				justify-content: space-between;
				border-bottom: 1px solid rgb(240,240,240);
				background-color:#FFFFFF;
				color: rgb(85,85,85);
				font-size: 0.416666rem;
			}
			.list_img_box{
				display: block;
				width: 0.555555rem;
				height: 0.388888rem;
			}
			.list_img_box img{
				width: 100%;
			}
			a{
				color:rgb(85,85,85);
			}
			a:active{
				color:rgb(27，130，209);
			}
			a:hover{
				color:rgb(85,85,85);
			}
			a:checked{
				color:rgb(27，130，209);
			}
		</style>
	</head>

	<body>
		<div class="content" id="msg-content">
			<!--顶部选择-->
			<ul class="head_ul">
				<li><a href="#Popover"><span class='title_text'>默认排序</span><img align="center" src="../images/teacher_list/plug_down.png" /></a></li>
				<li><a href="#Popover2"><span class='title_text'>全部星级</span><img align="center" src="../images/teacher_list/plug_down.png" /></a></li>
			</ul>
			
			<!--教师列表-->
			<div class="content_list">
				<ul class="content_list_ul">
					
					<li class="content_list_li" :data-teacherId = "value.teacher.id" v-for="(value, key, index) in oneList">
						<div class="recommend" v-if="index==0"><img src="../images/teacher_list/recommand_teacher.png" /></div>
						<div class="list_header">
							<!--头像-->
							<div class="list_avatar">
								<img src="" v-lazy="imgUrl+value.teacher.teacherImage"/>
							</div>
							<!--右边文字-->
							<div class="list_title">
								<div class="list_title_box">
									<div class="list_title_text" v-text="value.teacher.name||'未登录'"></div>
									<div class="list_title_img"><img align="center" :src="value.teacher.gender=='男'?'../images/teacher_list/male.png':'../images/teacher_list/female.png'" /></div>
										
									<ul class="list_title_ul">
										<li class="list_title_li" v-for="value.teacher.teacherRank/2"><img src="../images/teacher_list/leval_star.png" /></li>
										<li class="list_title_li" v-for="value.teacher.teacherRank%2"><img src="../images/teacher_list/level_star_half.png" /></li>
									</ul>
									<div class="list_title_right">
										￥<span v-text="value.teacher.teacherRank || '暂无'"></span>/分钟
									</div>
								</div>	
								<!--个性签名-->
								<div class="signature" v-text="value.teacher.teacherWorld">1</div>
								<!--标签-->
								<div class="list_label">
									<ul class="list_label_ul">
										{{value.teacher.teacherTag | teacherTag}}
										<li class="list_label_li" v-for="item in teacherTag" v-text="item"></li>
									</ul>
								</div>
							</div>							
						</div>
						
						<div class="list_item">
							<ul class="list_item_ul">
								<li>
									<div class="list_item_num" v-text="value.teacher.teacherTeachOfHour|| '暂无'"></div>
									<div class="list_item_text">授课时长/分</div>
								</li>
								<li>
									<div class="list_item_num" v-text="value.teacher.studentNum || '暂无'"></div>
									<div class="list_item_text">学生数/人</div>
								</li>
								<li>
									<div class="list_item_btn" style="color: #888888;" v-if="value.teacher.status == '-1'">已结束</div>			
									<div class="list_item_btn" v-else-if="value.teacher.status == '1'">正在上课</div>
									<div class="list_item_btn" v-else-if="value.teacher.status == '2'">可排课</div>
								</li>
							</ul>
						</div>
					</li>
					
				</ul>
			</div>
		</div>
		
		<div id="Popover" class="mui-popover">
			<div class="popover-box">
				<ul class="head_ul">
					<li><a href="#Popover"><span class='title_text'>默认排序</span><img align="center" src="../images/teacher_list/plug_up_hover.png" /></a></li>
					<li><a href="#Popover2">全部星级<img align="center" src="../images/teacher_list/plug_down.png" /></a></li>
				</ul>
				<div class="choose_list">
					<ul id="choose_list_ul1">
						<li><span>默认排序</span><span class="list_img_box"><img src="../images/teacher_list/tick.png"/></span></li>
						<li><span>授课时长</span><span class="list_img_box"></span></li>
						<li><span>学生人数</span><span class="list_img_box"></span></li>
					</ul>
				</div>
			</div>
		</div>
		
		<div id="Popover2" class="mui-popover">
			<div class="popover-box">
				<ul class="head_ul">
					<li><a href="#Popover">默认排序<img align="center" src="../images/teacher_list/plug_down.png" /></a></li>
					<li><a href="#Popover2"><span class='title_text'>全部星级</span><img align="center" src="../images/teacher_list/plug_up_hover.png" /></a></li>
				</ul>
				<div class="choose_list">
					<ul id="choose_list_ul2">
						<li><span>全部星级</span><span class="list_img_box"><img src="../images/teacher_list/tick.png"/></span></li>
						<li><span>一星级</span><span class="list_img_box"></span></li>
						<li><span>二星级</span><span class="list_img_box"></span></li>
						<li><span>三星级</span><span class="list_img_box"></span></li>
						<li><span>四星级</span><span class="list_img_box"></span></li>
						<li><span>五星级</span><span class="list_img_box"></span></li>
						<li><span>六星级</span><span class="list_img_box"></span></li>
						<li><span>七星级</span><span class="list_img_box"></span></li>
						<li><span>八星级</span><span class="list_img_box"></span></li>
						<li><span>九星级</span><span class="list_img_box"></span></li>
						<li><span>十星级</span><span class="list_img_box"></span></li>
					</ul>
				</div>
			</div>
		</div>
		<!--取出加密值-->
		<input type="text" style="visibility:hidden" id="getPassword" value="" />
		<script src="../js/mui.min.js"></script>
		<script type="text/javascript" src="../js/config.js" ></script>
		<script type="text/javascript" src="../js/hmac-sha1.js" ></script>
		<script type="text/javascript" src="../js/login_config.js" ></script>
		<script type="text/javascript" src="../js/vue.min.js" ></script>
		<script type="text/javascript" src="../js/vue-lazyload.js" ></script>
		<script type="text/javascript" src="../js/ajax.js" ></script>
		<script type="text/javascript">
			mui.init();
			mui.plusReady(function () {
				//监听返回
			    listenReturn();
			    
			    //接收到参数
			    var self  = plus.webview.currentWebview();
			    var courseType = self.courseType;
			    var organizationId = self.organizationId;
			    var subject =self.subject;
			    var subjectType = self.subjectType;
			    var state = app.getState();
			    var classId = state.data.studentClass;
			    console.log(organizationId,subject,subjectType,courseType,classId)
			    //网络请求
			     //查询当前城市
				var ajaxData = {
						url:'restful1/course/getCoursesByType',
						data: {
							courseType:courseType,
							organizationId:organizationId,
							subject:subject,
							subjectType:subjectType,
							classId:classId
						},
						type:'post'
				}
				ajax(ajaxData, function(data) {
					console.log(JSON.stringify(data))
						if(data.code == 200 && data.data.length!=0){
					     	vm.oneList = data.data;
							vm.imgUrl=ajaxUrl;
						}else if(data.data.length==0){
							plus.nativeUI.toast('获取数据为空！');
						}else if(success.err){
							plus.nativeUI.toast(data.err);
						}
				},true);
			    
			    mui('.content_list_ul').on('tap','.content_list_li',function(){
			    	var teacherId = this.getAttribute('data-teacherId');
			    	openView.nativeView('teacher_detail.html', 'teacher_detail', '教师详情',{teacherId:teacherId,type:'一对一'},'none');
			    })
			    
			    //排序点击事件
			    var choose_list_ul1 = document.getElementById("choose_list_ul1");
			    var choose_list_li1 = choose_list_ul1.getElementsByClassName('list_img_box');
			    mui('#choose_list_ul1').on('tap','li',function(){
			    	for(var i=0;i<choose_list_li1.length;i++){
			    		choose_list_li1[i].innerHTML = '';
			    	}
			    	this.getElementsByClassName('list_img_box')[0].innerHTML = '<img src="../images/teacher_list/tick.png"/>';
			    })
			    
			    //第二个排序
			    var choose_list_ul2 = document.getElementById("choose_list_ul2");
			    var choose_list_li2 = choose_list_ul2.getElementsByClassName('list_img_box');
			     mui('#choose_list_ul2').on('tap','li',function(){
			    	for(var i=0;i<choose_list_li2.length;i++){
			    		choose_list_li2[i].innerHTML = '';
			    	}
			    	this.getElementsByClassName('list_img_box')[0].innerHTML = '<img src="../images/teacher_list/tick.png"/>';
			    })
			})
			
			Vue.filter('teacherTag',function(value){
				if(value){
					vm.teacherTag = value.split('，');
				}
				
			})
			
			Vue.use(VueLazyload, {
			    preLoad: 1.3,  
			    error: '../images/status/failed_trend.png',  
			    loading: '../images/status/failed_trend.png',  
			    attempt: 3  
			});
			var vm = new Vue({
				el: '#msg-content',
				data: {
					oneList:[],
					imgUrl:'',
					teacherTag:[]
				}			
			})
		</script>
	</body>

</html>