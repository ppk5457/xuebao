<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<script type="text/javascript" src="../js/zoom/flexible.js" ></script>
		<link href="../css/mui.min.css" rel="stylesheet" />
		<style>
			.header{
				width: 100%;
				padding-top: 1.166666rem;
				background-color: #FEFEFE;
				padding-bottom:0.763888rem;
			}
			.content{
				padding-bottom:1.44444rem;
			}
			.header_box{
				width: 1.666666rem;
				height: 1.666666rem;
				margin: 0 auto;
				border-radius:90px;
				overflow: hidden;
			}
			.header_box img{
				width: 100%;
				height: 100%;
				border-radius:90px;
			}
			
			.body_list{
				background-color: #FEFEFE;
				padding: 0 5%;
			}
			.body_list_ul li{
				display: flex;
				justify-content:space-between;
				align-items: center;
				padding-bottom:0.555555rem;
				font-size: 0.444444rem;
				color: rgb(51,51,51);
			}
			
			.list_right{
				color: rgb(136,136,136);
			}
			
			.right_money{
				color: rgb(254,113,54);
			}
			
			/*底部*/
			.footer{
				position: fixed;
				bottom: 0;
				left: 0;
				display: flex;
				width: 100%;
				height: 1.44444rem;
				z-index: 999;
			}
			.footer_left{
				width: 60%;
				display: inline-flex;
				justify-content: center;
				align-items: center;
				background-color: #FEFEFE;
				font-size: 0.444444rem;
			}
			.left_text{
				color: rgb(254,113,54);
				font-size: 0.444444rem;
			}
			.footer_right{
				width: 40%;
				display: inline-flex;
				justify-content: center;
				align-items: center;
				background-color: rgb(27,130,209);
				color: #FEFEFE;
				font-size: 0.444444rem;
			}
			.footer_right:active{
				background-color: #0062CC;
			}
			
			/*导航条*/
			.serve_nav {
				width: 100%;
				height: 1.063888rem;
				border-bottom: 1px solid rgba(220, 220, 220, .5);
				display: flex;
				align-items: center;
				background-color: rgba(255, 255, 255, 1);
				margin-top: 0.222222rem;
			}
			
			.nav_line {
				width: 3px;
				background-color: #007AFF;
				height: 0.436666rem;
				margin-left: 5%;
			}
			
			.nav_serve {
				width: 70%;
				margin-top: 0.128888rem;
				margin-left: 0.163333rem;
				color: rgba(136, 136, 136, 1);
				font-size: 0.388888rem;
			}
			.nav_more {
				width: 30%;
				text-align: right;
				padding-right: 5%;
				color: rgba(136, 136, 136, 1);
			}
			.more{
				font-size: 0.333333rem;
				color: rgb(27,130,209);
			}
			.more img{
				width: 0.319444rem;
				height: 0.180555rem;
				margin-left: 0.111111rem;
			}
			/*课程安排*/
			.course_ul{
				width: 100%;
			}
			.course_ul li{
				display: flex;
				align-items: center;
				background-color: #FEFEFE;
				padding:4% 2%;
				position: relative;
				border-top:1px solid rgba(220,220,220,.5);
			}
			.course_ul li >span{
				padding-left: 0.388888rem;
				font-size: 0.388888rem;
			}
			.course_time{
				margin-left: 0.388888rem;
				padding: 0 0.338888rem !important;
				border: 2px solid #1b82d1;
				border-radius:18px;
				color: #1b82d1;
			}
			.course_place{
				position: absolute;
				right: 5%;
				color: #555555;
			}
			
			.course_ul li:last-child{
				height: 0.833333rem;
				justify-content: center;
				color: rgb(27,130,209);
				font-size: 0.333333rem;
			}
			.course_ul li:last-child:active{
				background-color: rgb(240,240,240);
			}
			.course_ul li:last-child > img{
				width: 0.319444rem;
				height: 0.180555rem;
				margin-left: 0.111111rem;
			}
			/*课程介绍*/
			.course_introduce{
				padding: 2% 5%;
				background-color: #FEFEFE;
			}
			.course_title{
				font-size: 0.388888rem;
				padding-top: 0.388888rem;
				color: rgb(51,51,51);	
			}
			.course_body{
				line-height: 28px;
				padding-top: 0.388888rem;
				font-size: 0.388888rem;
			}
			.course_title:last-child{
				padding-bottom: 0.388888rem;
			}
			
			/*授课地址*/
			.location_box{
				padding: 0.388888rem 5%;
				background-color: #FEFEFE;
				font-size: 0.388888rem;
				color: rgb(51,51,51);
				padding-bottom:1.34444rem;
			}
		</style>
	</head>

	<body>
		<div class="content" id="msg-content">
			<div class="header">
				<div class="header_box">
					<img src="../images/status/not_login_head.png" onload="load(this,vm.teacher.teacherImage)" />
				</div>
			</div>
			<div class="body_list">
				<ul class="body_list_ul">
					<li><span>授课老师</span><span class="list_right" v-text="teacher.name"></span></li>
					<li><span>科目</span><span class="list_right" v-text="course.subjectName"></span></li>
					<li><span>问题</span><span class="list_right" v-text="course.courseTypeName"></span></li>
					<li><span>上课方式</span><span class="list_right">学生上门</span></li>
					<li><span>上课地点</span><span class="list_right">{{course.organizationId | organizationId}}</span></li>
					<li><span>价格</span><span class="list_right right_money"><span v-text="course.coursePrice.courseprice"></span>元/分钟</span></li>
					<li><span>课时</span><span class="list_right"><span v-text="course.courseDuration"></span>分钟</span></li>
				</ul>
			</div>
			<div class="serve_nav">
				<div class="nav_line"></div>
				<span class="nav_serve">课程介绍</span>
				<div id="server_more" class="nav_more more">全文<img align="center" src="../images/teacher_list/spread.png" /></div>
			</div>
			<div class="course_introduce" v-text="course.courseIntro">
				<!--<div class="course_title">【教学目标】</div>
				<div class="course_body" ></div>
				<div class="course_title">【教学内容】</div>-->
			</div>
			
			
			<div class="serve_nav">
				<div class="nav_line"></div>
				<span class="nav_serve">课程安排</span>
			</div>
			<div class="course_list">
				<ul class="course_ul">
					<li v-for="(item,index) in course.courseSection"><span v-text="index+1"></span><span>{{item.courseStartDate | courseDate}}</span><span class="course_time">{{item.courseStartDate | courseTime}}-{{item.courseEndDate | courseTime}}</span><span class="course_place">{{course.organizationId | organizationId}}</span></li>
					<!--<li><span>2</span><span>10月30日</span><span class="course_time">09:30-11:30</span><span class="course_place">东软店</span></li>-->
					<li class="list_btn" v-show="course.courseSection.length>5">查看全部<img align="center" src="../images/teacher_list/spread.png" /></li>
				</ul>
			</div>
			
			<div class="serve_nav">
				<div class="nav_line"></div>
				<span class="nav_serve">授课地址</span>
			</div>
			<div class="location_box" v-text="course.courseLocation"></div>
			
			<div class="footer">
				<div class="footer_left">共支付：<span class="left_text" v-text="money">0</span>学币</div>
				<div class="footer_right" @tap="pay_money(money)">立即支付</div>
			</div>
		</div>
		<!--取出加密值-->
		<input type="text" style="visibility:hidden" id="getPassword" value="" />
		<script src="../js/mui.min.js"></script>
		<script type="text/javascript" src="../js/config.js" ></script>
		<script type="text/javascript" src="../js/login_config.js" ></script>
		<script type="text/javascript" src="../js/hmac-sha1.js" ></script>
		<script type="text/javascript" src="../js/vue.min.js" ></script>
		<script type="text/javascript" src="../js/md5.min.js" ></script>
		<script type="text/javascript" src="../js/imgload.js" ></script>
		<script type="text/javascript" src="../js/ajax.js" ></script>
		<script type="text/javascript">
			mui.init();
			 var courseId = '';
			mui.plusReady(function () {
			    //监听返回
			    listenReturn();
			    var self = plus.webview.currentWebview();
			   courseId = self.courseId;
			    var ajaxData = {
					url:'restful1/course/getCoursesByCourseId',
					data: {
						courseId:courseId
					},
					type:'post'
				}
				ajax(ajaxData, function(data) {
					if(data.code == 200){
						console.log(JSON.stringify(data.data.teacher))
						vm.teacher = data.data.teacher;
						vm.course = data.data.course;
						console.log(JSON.stringify(vm.course))
						vm.imgUrl = ajaxUrl;
						var priceNum = data.data.course.coursePrice.courseprice*data.data.course.courseDuration;
						vm.money = priceNum.toFixed(2);
					}else{
						plus.nativeUI.toast('获取报名信息失败！');
					}
				},true);
				//点击查看全部
				mui(".course_ul").on('tap','.list_btn',function(){
					
				});
			
				// 发起支付
				mui('.footer').on('tap','.footer_right',function(){
					
				})
			})
			
			function pay_money(value){
				var durtion = value;
					if(durtion > 0){
						durtion = parseFloat(durtion);
						console.log(durtion)
						openView.nativeView('../pages_setting/pay_password2.html', 'pay_password2', '支付',{durtion:durtion,courseId:courseId});
					}else{
						mui.toast('请先选择课时');
					}
			}
			Vue.filter('organizationId',function(value){
				return originid(value);
			});
			Vue.filter('courseDate',function(value){
				if(value){
					var time = value.replace(/-/g,"/");
					time = new Date(time);
					var getMonth = time.getMonth()+1;
					var getHour = time.getDate();
					return getMonth +'月'+getHour+'日';
				}
			});
			Vue.filter('courseTime',function(value){
				if(value){
					var value = value.split(" ");
					var time = value[1].split(":");
					return time[0]+':'+time[1];
				}
			});
			var vm = new Vue({
				el: '#msg-content',
				data: {
					teacher:{},
					course:{},
					imgUrl:'',
					money:''
				}
			})
		</script>
	</body>

</html>