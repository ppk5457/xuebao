<!doctype html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<meta name="apple-mobile-web-app-capable" content="yes">
		<title>教师详情</title>
		<script type="text/javascript" src="../js/zoom/flexible.js"></script>
		<link href="../css/mui.min.css" rel="stylesheet" />
		<style>
			/*背景*/
			
			body,
			html {
				background-color: #FEFEFE;
			}
			
			.list_bg {
				width: 100%;
				min-height: 3rem;
				max-height: 5rem;
				background-color: rgb(240,240,240);
				background-image: url(../images/status/failed.png);
				background-position: left top;
				background-repeat: no-repeat;
				background-size: 100% 100%;
				overflow: hidden;
			}
			
			.list_bg img {
				width: 100%;
			}
			
			.header_avatar {
				height: 1.666666rem;
				width: 100%;
				text-align: center;
				margin-top: -0.755555rem;
				border-radius:90px;
				overflow: hidden;
			}
			
			.header_avatar img {
				width: 1.666666rem;
				height: 1.666666rem;
				border-radius:90px;
			}
			
			.header_name {
				font-size: 0.444444rem;
				color: #333333;
				text-align: center;
				margin-top: 0.222222rem;
			}
			
			.header_name>img {
				height: 0.388888rem;
				width: 0.388888rem;
				margin-left: 0.138888rem;
			}
			
			.signature {
				text-align: center;
				margin: 0.222222rem 0;
				color: #888888;
				font-size: 0.333333rem;
			}
			
			.header_detail {
				display: flex;
				justify-content: center;
				align-items: center;
				font-size: 0.388888rem;
				color: #555555;
			}
			
			.header_detail div {
				margin: 0 0.138888rem;
			}
			
			.detail_subject img {
				width: 0.277777rem;
				height: 0.361111rem;
				margin-right: 0.111111rem;
				margin-bottom: 0.089444rem;
			}
			
			.detail_age img {
				width: 0.277777rem;
				height: 0.319444rem;
				margin-right: 0.111111rem;
				margin-bottom: 0.087777rem;
			}
			
			.detail_perfect img {
				width: 0.305555rem;
				height: 0.277777rem;
				margin-right: 0.111111rem;
				margin-bottom: 0.088888rem;
			}
			
			.list_item {
				width: 100%;
				background-color: rgb(255, 255, 255);
				padding: 0.377777rem;
				margin-bottom: 0.111111rem;
			}
			
			.list_item_ul {
				display: flex;
				align-items: center;
			}
			
			.list_item_ul li {
				width: 33.33%;
				text-align: center;
				border-right: 2px solid #BEBEBE;
			}
			
			.list_item_ul li:last-child {
				border: none;
			}
			
			.list_item_num {
				font-size: 0.444444rem;
			}
			
			.list_item_text {
				color: #888888;
				font-size: 0.388888rem;
			}
			
			.serve_nav {
				width: 100%;
				height: 1rem;
				border-bottom: 2px solid #f0f0f0;
				display: flex;
				align-items: center;
				background-color: rgba(255, 255, 255, 1);
			}
			.fist_nav{
				border-top: 2px solid #f0f0f0;;
			}
			
			.nav_line {
				width: 3px;
				background-color: #007AFF;
				height: 0.436666rem;
				margin-left: 5%;
			}
			
			.nav_serve {
				width: 70%;
				margin-left: 0.222222rem;
				color: rgba(136, 136, 136, 1);
				font-size: 0.388888rem;
			}
			
			.nav_more {
				width: 30%;
				text-align: right;
				padding-right: 5%;
				color: rgba(136, 136, 136, 1);
			}
			/*个人标签*/
			
			.list_label_ul {
				display: flex;
				flex-wrap: wrap;
				padding: 0.277777rem 5%;
			}
			
			.list_label_li {
				background-color: rgb(166, 194, 77);
				padding: 0 0.259444rem;
				text-align: center;
				border-radius: 10px;
				color: rgb(255, 255, 255);
				margin-right: 0.222222rem;
				margin-bottom: 0.138888rem;
			}
			
			.list_label_li:nth-child(1) {
				background-color: rgb(166, 194, 77);
			}
			
			.list_label_li:nth-child(2) {
				background-color: rgb(221, 96, 91);
			}
			
			.list_label_li:nth-child(3) {
				background-color: rgb(100, 195, 249);
			}
			
			.list_label_li:nth-child(4) {
				background-color: rgb(166, 194, 77);
			}
			
			.list_label_li:nth-child(5) {
				background-color: rgb(221, 96, 91);
			}
			
			.list_label_li:nth-child(6) {
				background-color: rgb(100, 195, 249);
			}
			
			.line {
				height: 0.222222rem;
				width: 100%;
				background-color: #F0F0F0;
			}
			/*个人简历*/
			
			.my_resume {
				padding: 0.388888rem 5%;
				line-height: 28px;
				font-size: 0.388888rem;
				color: #333333;
			}
			/*课堂互动*/
			
			.detail_list{
				display: flex;
				background-color: #FEFEFE;
				padding-top: 0.388888rem;
			}
			.detail_list:last-child{
				padding-bottom: 0.138888rem;
			}
			.list_left{
				width: 20%;
				text-align: center;
				font-size: 0.444444rem;
				color: #555555;
			}
			.list_right{
				width: 80%;
				font-size: 0.388888rem;
				color: #333333;
				padding-top: 1%;
				padding-right: 2%;
			}
			.list_right img{
				margin: 0 1%;
				border-radius: 4px;
				width: 1.666666rem;
				height: 1.722222rem;
			}
			/*课堂互动评论*/
			
			.dynamic_list {
				display: flex;
				background-color: #FEFEFE;
				padding: 0 0.388888rem;
				padding-bottom: 0.222222rem;
				border-bottom: 2px solid #F0F0F0;
			}
			.more_dynamic{
				padding-top:0.388888rem;
			}
			
			.avatar {
				width: 15%;
			}
			
			.avatar_box {
				width: 1.111111rem;
				height: 1.111111rem;
				border-radius: 90px;
				background-color: rgb(220, 220, 220);
				overflow: hidden;
				margin-top: 0.288888rem;
			}
			.more_avatar{
				margin-top: 0;
			}
			.avatar_box img {
				width: 100%;
				height: 100%;
			}
			
			.more_text {
				width: 85%;
			}
			
			.list_name{
				font-size: 0.388888rem;
				color: rgb(51,51,51);
				padding-top: 0.1088888rem;
			}
			.list_name img{
				margin-left: 0.222222rem;
				margin-bottom: 0.102222rem;
				width: 0.305555rem;
				height: 0.291666rem;
			}
			.list_signature{
				font-size: 0.277777rem;
				color: rgb(136,136,136);
				margin-bottom: 0.222222rem;
			}
			.list_cover{
				width: 90%;
				border-radius:10px;
				overflow: hidden;
			}
			.list_cover img{
				width: 100%;
				border-radius:10px;
			}
			.list_title{
				width: 90%;
				margin-top: 0.222222rem;
				margin-bottom: 0.25rem;
				font-size: 0.388888rem;
			}
			.list_content{
				font-size: 0.333333rem;
				color: rgb(85,85,85);
				margin-bottom: 0.416666rem;
			}
			.show_more{
				font-size: 0.277777rem;
				color:rgb(86,110,148);
				margin:0.2328888rem 0;
			}
			.list_footer{
				display: flex;
				justify-content: space-between;
				align-items: center;
			}
			.footer_time{
				font-size: 0.277777rem;
				color: rgb(85,85,85);
			}
			.footer_comm{
				font-size: 0.277777rem;
				color: rgb(85,85,85);
			}
			.footer_comm img{
				width: 0.277777rem;
				height: 0.277777rem;
				color: rgb(136,136,136);
			}
			.list_commit_ul{
				background-color: rgb(240,240,240);
				padding: 0.222222rem;
				border-radius:4px;
				margin-top: 0.222222rem;
				position: relative;
				z-index: 9;
			}
			.list_commit_ul:before{
				content:"";
				background-color:rgb(240,240,240);
				transform:rotateZ(45deg);
				-webkit-transform:rotateZ(45deg);
				width: 0.277777rem;
				height: 0.277777rem;
				position: absolute;
				right: 3%;
				top: -5px;
				z-index: 99;
			}
			.list_commit_ul li >span{
				font-size: 0.277777rem;
				color: rgb(86,110,148);
			}
			/*课程介绍*/
			.course_description_list{
				display: flex;
				padding: 0 5%;
				padding-top: 0.388888rem;
			}
			.course_description_title{
				font-size: 0.333333rem;
				color: #333333;
				display: inline-flex;
				width: 30%;
				position: relative;
			}
			.circle{
				width: 0.138888rem;
				height: 0.138888rem;
				background-color: #007AFF;
				border-radius:45px;
				margin-right: 0.111111rem;
				position: absolute;
				top:0.2217777rem;
				left: 0;
			}
			.course_title_detail{
				width: 100%;
				text-align: right;
				margin-right: 15%;
				font-size: 0.388888rem;
			}
			.course_description_body{
				width: 77%;
			}
			.course_description_body span{
				padding-right: 0.222222rem;
				font-size: 0.388888rem;
				color: #555555;
			}
			.nav_bottom{
				padding-bottom: 0.388888rem;
			}
			.course_description:last-child{
				padding-bottom: 0.944444rem;
			}
			
			.line_footer{
				height: 1.666666rem;
				width: 100%;
				background-color: rgba(220, 220, 220, .5);
				padding-bottom: 50px;
			}
			
			/*底部按钮*/
			.footer_btn{
				display: flex;
				z-index: 9999;
				position: fixed;
				bottom: 0px;
				width: 100%;
				height: 50px;
				align-items: center;
			}
			#btn_consult{
				width:40%;
				height: 100%;
				background-color: #1B82D1;
				color: #FEFEFE;
				display: inline-flex;
				justify-content: center;
				align-items: center;
				font-size: 0.5rem;
			}
			#btn_apply{
				width:60%;
				height: 100%;
				background-color: #FE7136;
				color: #FEFEFE;
				display: inline-flex;
				justify-content: center;
				align-items: center;
				font-size: 0.5rem;
			}
			.commit_box{
				color: rgb(85,85,85) !important;
			}
		</style>
	</head>

	<body>
		<div class="footer_btn">
			<div id="btn_consult">咨询</div>
			<div id="btn_apply">报名</div>
		</div>
		
		<div class="content" id="msg-content">
			<div class="list_bg">
				<img src="" v-lazy="imgUrl+teacher.teacherImage" />
			</div>

			<!--头像-->
			<div class="header_avatar">
				<img src="" v-lazy="imgUrl+teacher.teacherImage" />
			</div>

			<div class="header_name"><span v-text="teacher.name || '未登录'"></span><img align="center" :src="teacher.gender=='男'?'../images/teacher_list/male.png':'../images/teacher_list/female.png'" /></div>

			<div class="signature" v-text="teacher.teacherWorld || '精勤博学，学以致用'"></div>

			<div class="header_detail">
				<div class="detail_subject"><img align="center" src="../images/teacher_list/teach_subj.png" />授课:<span v-text="teacher.teacherAgeOfYear || '暂无'"></span></div>
				<div class="detail_age"><img align="center" src="../images/teacher_list/icon_jl.png" />教龄:<span v-text="teacher.teacherAgeOfYear || '0'"></span>年</div>
				<div class="detail_perfect"><img align="center" src="../images/teacher_list/red_heart.png" />满意度:<span v-text="teacher.teacherAgeOfYear || '100%'"></span></div>
			</div>

			<div class="list_item">
				<ul class="list_item_ul">
					<li>
						<div class="list_item_num" v-text="teacher.teacherTeachOfHour || 0"></div>
						<div class="list_item_text">授课时长/分</div>
					</li>
					<li>
						<div class="list_item_num" v-text="teacher.studentNum || 0"></div>
						<div class="list_item_text">学生数/人</div>
					</li>
					<li>
						<div class="list_item_num"><span v-text="teacher.teacherRank || 'A'"></span>级</div>
						<div class="list_item_text">平台等级</div>
					</li>
				</ul>
			</div>

			<div class="serve_nav fist_nav">
				<div class="nav_line"></div>
				<span class="nav_serve">平台标签</span>
			</div>
			<!--标签-->
			<div class="platform_label" v-if="teacher.teacherTag">
				<ul class="list_label_ul">
					<li class="list_label_li" v-for="item in teacher.teacherTag" v-text="item"></li>
					<!--<li class="list_label_li">名师</li>-->
				</ul>
			</div>
			<div class="line"></div>
			<!--个人简历-->
			<div class="resume_box">
				<div class="serve_nav">
					<div class="nav_line"></div>
					<span class="nav_serve">个人简历</span>
					<div v-if="resume.resumeExperience" class="nav_more resume_detail">详情</div>
				</div>
				<div v-if="resume.resumeExperience" class="my_resume resume_detail"  v-text="resume.resumeExperience"></div>
			</div>
			<div class="line"></div>
			<!--课堂互动-->
			<div class="serve_nav">
				<div class="nav_line"></div>
				<span class="nav_serve">课堂互动</span>
				<div v-if="courseStudents.length != 0" class="nav_more">更多</div>
			</div>
			<div class="dynamic_list_box"  v-for="(courseItem, index1) in courseStudents" v-if="courseItem.courseFeedBack.length != 0 || index1<3">
				<div class="dynamic_list" v-for="(FeedBackItem,index) in courseItem.courseFeedBack" v-if="index<1"> 
					<div class="avatar">
						<div class="avatar_box">
							<img src="" v-lazy="imgUrl+courseItem.studentImage" />
						</div>
					</div>
					<div class="more_text">
						<div class="detail_box" v-if="courseItem.courseFeedBack.length != 0">
							<div>
							<div class="detail_list">
								<div class="list_left" v-text="courseItem.studentName"></div>
							</div>
							<div class="detail_list">
								<div class="list_left">重点:</div>
								<div class="list_right" v-text="FeedBackItem.feedbackImportant || '暂无'"></div>
							</div>
							<div class="detail_list">
								<div class="list_left">难点:</div>
								<div class="list_right" v-text="FeedBackItem.feedbackDifficult || '暂无'"></div>
							</div>
							<div class="detail_list">
								<div class="list_left">问题:</div>
								<div class="list_right" v-text="FeedBackItem.feedbackQuestion || '暂无'"></div>
							</div>
							<div class="detail_list">
								<div class="list_left">方案:</div>
								<div class="list_right" v-text="FeedBackItem.feedbackScheme || '暂无'"></div>
							</div>
							<div class="detail_list">
								<div class="list_left">作业:</div>
								<div class="list_right" v-text="FeedBackItem.feedbackHomework || '暂无'"></div>
							</div>
							<div class="detail_list">
								<div class="list_left"></div>
								<div class="list_right"><img v-for="imgItem in FeedBackItem.feedbackImages.split(',')" src="" v-lazy="imgUrl+imgItem"></div>
							</div>
						</div>
							<!--课堂互动评论-->
							<div class="list_footer">
								<div class="footer_time">{{FeedBackItem.feedbackDate | dateTime}}</div>
								<div class="footer_comm"><img align="center" src="../images/index/chat_num.png" />&nbsp;&nbsp;<span v-text="FeedBackItem.comments.length || '0'"></span></div>
							</div>
							<div class="list_commit" v-if="FeedBackItem.comments.length != 0">
								<ul class="list_commit_ul">
									<li v-for="commentItem in FeedBackItem.comments"><span v-text="commentItem.commentSourceName"></span> 回复 <span><span v-text="commentItem.commentTargetName"></span>：</span> <span class="commit_box" v-text="commentItem.commentContent"></span></li>
								</ul>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!--动态-->
			<div class="line"></div>
			<div class="serve_nav">
				<div class="nav_line"></div>
				<span class="nav_serve">他的动态</span>
				<div v-if="teacherNews.length != 0" class="nav_more">更多</div>
			</div>
			<div class="my_dynamic_list">
				
				<div class="dynamic_list more_dynamic" v-for="(newItem,index) in teacherNews" v-if="index < 3">
					<div class="avatar">
						<div class="avatar_box more_avatar">
							<img src="" v-lazy="ajaxUrl+newItem.teacherImage" />
						</div>
					</div>
					<div class="more_text">
						<div class="list_name" v-text="newItem.userName || '未登录'"><img align="center" src="../images/teacher_list/dynamic.png" /></div>
						<div class="list_signature" v-text="teacher.teacherWorld || '精勤博学，学以致用'"></div>
						<div class="list_cover">
							<img src="" v-lazy="imgUrl+newItem.images"/>
						</div>
						<div class="list_title" v-text="newItem.title || '未知'"></div>
						<div class="list_content mui-ellipsis-1" v-text="newItem.content || '暂无'"></div>
						<div class="list_footer">
							<div class="footer_time">{{newItem.newscreateTime | dateTime}}</div>
							<div class="footer_comm"><img align="center" src="../images/index/chat_num.png" /> <span v-text="newItem.comments.length || 0"></span></div>
						</div>
						
						<div class="list_commit" v-if="newItem.comments.length>0">
							<ul class="list_commit_ul">
								<li v-for="commentItem2 in newItem.comments"><span v-text="commentItem2.sourceUserName"></span> 回复 <span v-text="commentItem2.targetUserName"></span><span>：</span><span class="commit_box" v-text="commentItem2.comment"></span></li>
							</ul>
						</div>
					</div>
				</div>

				<!--<div class="dynamic_list more_dynamic">
					<div class="avatar">
						<div class="avatar_box more_avatar">
							<img src="../images/teacher_list/teacher_dynamic_head.png" />
						</div>
					</div>
					<div class="more_text">
						<div class="list_name">周老师<img align="center" src="../images/teacher_list/dynamic.png" /></div>
						<div class="list_signature">没有更好，只有最好！</div>
						<div class="list_cover">
						<img src="../images/teacher_list/pensonnel.png" />
					</div>
						<div class="list_title">
							上月去香港看了看，发现偌大的世界真美妙！
						</div>
						<div class="list_content mui-ellipsis-1">
							在香港吃了所谓的"四川火锅"，不会说广东话，没文化，真可怕。在香港吃了所谓的"四川火锅"，不会说广东话，没文化，真可怕。在香港吃了所谓的"四川火锅"，不会说广东话，没文化，真可怕。
						</div>
						<div class="show_more">全文</div>
						<div class="list_footer">
							<div class="footer_time">2016年10月21日</div>
							<div class="footer_comm"><img align="center" src="../images/index/chat_num.png" /> 102</div>
						</div>

						<div class="list_commit">
							<ul class="list_commit_ul">
								<li><span>宋丹丹：</span>老师好棒哦，回来请你吃正宗的四川火锅！</li>
								<li><span>周老师</span> 回复 <span>宋丹丹：</span>老师好棒哦，回来请你吃正宗的四川火锅！</li>
							</ul>
						</div>
					</div>
				</div>-->
			</div>
		
		<!--课程介绍-->
		<div class="line"></div>
			<div class="serve_nav">
				<div class="nav_line"></div>
				<span class="nav_serve">课程介绍</span>
			</div>
			<div class="course_description">
				<div class="course_description_list">
					<div class="course_description_title"><div class="circle"></div><div class="course_title_detail">授课年级 :</div></div>
					<div class="course_description_body">
						<span v-text="teacher.teacherClass || '暂无'"></span>
					</div>
				</div>
				<div class="course_description_list">
					<div class="course_description_title"><div class="circle"></div><div class="course_title_detail">授课范围 :</div></div>
					<div class="course_description_body nav_bottom">
						<span v-text="teacher.teacherRange || '0'"></span><span>km</span>
					</div>
				</div>
			</div>
		<div class="line_footer"></div>
		</div>
		<!--取出加密值-->
		<input type="text" style="visibility:hidden" id="getPassword" value="" />
		<script src="../js/mui.min.js"></script>
		<script type="text/javascript" src="../js/config.js"></script>
		<script type="text/javascript" src="../js/login_config.js" ></script>
		<script type="text/javascript" src="../js/hmac-sha1.js" ></script>
		<script type="text/javascript" src="../js/vue.min.js" ></script>
		<script type="text/javascript" src="../js/vue-lazyload.js" ></script>
		<script type="text/javascript" src="../js/ajax.js" ></script>
		<script type="text/javascript">
			mui.init();
			mui.plusReady(function () {
				//监听返回
			    listenReturn();
			    //获取传递过来的数据(若有，则获取，若无，则请求)
			    var self  = plus.webview.currentWebview();
			    var type = self.type;
			    var classType = '';	
			    switch (type){
			    	case "动态":
			    		var teacherdata = self.teacherdata;
			    		teacherdata = JSON.parse(teacherdata);
			    		dynamic(teacherdata);
			    		break;
			    	case "一对一":
			    		var teacherId = self.teacherId;
			    		oneToOne();
			    		break;
			    	case "班课":
			    		var teacherId = self.teacherId;
			    		oneToOne();
			    		break;
			    	default:
			    		break;
			    }
			    
			    //一对一
			    function oneToOne(){
			    	var ajaxData = {
						url:'restful1/teacher/teacherdetail',
						data: {
							teacherId:teacherId
						},
						type:'post'
					}
					ajax(ajaxData, function(data) {
						if(data.code == 200 && data.data.length!=0){
							dynamic(data);
						}else if(data.data.length==0){
							plus.nativeUI.toast('获取数据为空！');
						}else{
							plus.nativeUI.toast(data.msg);
						}
					},true);
			    }
			    
			    //动态
			    function dynamic(teacherdata){
			    	if(teacherdata.code == 200){
			     	teacherid = teacherdata.data.teacher.id;
			     	vm.courseStudents = teacherdata.data.courseStudents;		     	
			     	vm.resume = teacherdata.data.resume;
			     	var tag = teacherdata.data.teacher.teacherTag.trim();
			     	//处理字符串			     	
			     	var tagArr= new Array();
			     	tagArr=tag.split("，");
			     	teacherdata.data.teacher.teacherTag = tagArr;
			     	
			     	vm.teacher=teacherdata.data.teacher;

					vm.teacherNews=teacherdata.data.teacherNews;
					
					vm.imgUrl=ajaxUrl;
			     }else{
			     	plus.nativeUI.toast('暂未获取到教师信息！');
			     }
			    }			    
			    
			    mui('.resume_box').on('tap','.resume_detail',function(){
			    	console.log('点击详情')
			    	openView.nativeView('teacher_detail_2.html', 'teacher_detail_2', '个人简历');
			    })
			    
			    //报名
			    document.getElementById("btn_apply").addEventListener('tap',function(){
			    	openView.nativeView('apply.html', 'apply', '报名',{teacherid:teacherid,type:type});
			    })
			    
			    //咨询
			    document.getElementById("btn_consult").addEventListener('tap',function(){
			    	openView.nativeView('../im/chat.html', 'chat', '咨询');
			    })
			    
			    //评论留言
			    mui('.content').on('tap','.footer_comm',function(){
			    	openView.nativeView('../pages_index/comment.html', 'comment', '留言');
			    })
			});
			
			Vue.filter('index1',function(value){
				console.log('12312',value)
			})
			Vue.filter('dateTime',function(value){
				if(value){
					var time = value.replace(/-/g,"/");
					time = new Date(time);
					var getMonth = time.getMonth()+1;
					var getHour = time.getDate();
					return getMonth +'月'+getHour+'日';
				}
			});
			Vue.use(VueLazyload, {
			    preLoad: 1.3,  
			    error: '../images/status/failed_trend.png',  
			    loading: '../images/status/failed_trend.png',  
			    attempt: 3  
			});
			var vm = new Vue({
				el: '#msg-content',
				data: {
					courseStudents:[],
					resume:{},
					teacher:{},
					teacherNews:[],
					imgUrl:''
				}
			})
		</script>
	</body>
</html>